#buy
  .modal-header.bc-modal-header.flex-between.flex-center
    .flex-column.flex-1
      .flex-row.flex-between.flex-center
        h3(translate="BUY_BITCOIN")
        quote-countdown(quote="quote" get-quote="getQuote()" ng-hide="step >= 5")
      buy-steps(transaction="transaction" 
                payment-info="paymentInfo"
                exchange-acct="userHasExchangeAcct"
                currency-symbol="currencySymbol"
                trade-error="formattedTrade.error"
                profile="profile"
                exchange="exchange"
                partner="partner"
                method="method"
                step="step")
  .modal-body.fade(ng-class="{'buy-amount': step === 0, 'buy-select-country': step === 1, 'buy-email': step === 2, 'buy-accept-terms': step === 3, 'buy-summary': step === 4, 'isx': step === 5 || step === 6, 'buy-pending': step === 7, 'buy-success': step === 8}")
    .alert-in-app
      alerts(context="alerts")
    div(ng-show="step === 0")
      include ./buy-amount
    div(ng-show="step === 1")
      include ./buy-select-country
    div(ng-show="step === 2")
      include ./buy-email
    div(ng-show="step === 3")
      include ./buy-accept-terms
    div(ng-show="step === 4")
      include ./buy-summary
    div.iframe(ng-show="step === 5 || step === 6")
      isignthis(transaction-id='trade.iSignThisID' on-load="loadISX()" on-declined="declinedTx(tx)" on-pending="pendingTx(tx)" on-review="reviewTx(tx)" on-expired="expiredTx(tx)" on-failed="failedTx(tx)" payment-info="paymentInfo")
    div(ng-if="step === 7")
      include ./trade-summary
    div(ng-if="step === 8")
      include ./trade-summary
    .flex-end.flex-center.mtl
        span.mrs.type-sm Powered by
        a(href="https://www.coinify.com/" target="_blank" rel="noopener noreferrer")
          img.coinify-logo(src="img/coinify-logo.svg")
  //- needs directive
  .modal-footer.flex-end.flex-row
    button.button-muted(ng-show="step > 0 && step < 5" ng-click="prevStep()") Go Back
    
    .flex-1.flex-end(ng-hide="status.loading")
      button.button-muted.mrm(ng-click="close()" translate="CANCEL" ng-hide="step >= 5")
      button.button-muted.mrm(ng-click="close(true)" translate="FINISH_LATER" ng-show="step === 5 || step === 6")
      button.button-muted.mrm(ng-click="cancel()" translate="CANCEL" ng-show="step > 7")
      div(ng-hide="step >= 5")
        button.button-primary(
          ladda-translate="CONTINUE"
          ng-click="nextStep()"
          data-style="expand-left"
          ui-ladda="status.waiting"
          ng-disabled="isDisabled() || step === 2"
          ng-hide="step > 2")
        button.button-success(
          ladda-translate="CONTINUE"
          ng-click="signup()"
          data-style="expand-left"
          ui-ladda="status.waiting"
          ng-disabled="isDisabled()"
          ng-show="step === 3")
        button.button-success(
          ladda-translate="CONFIRM_PAY"
          ng-click="buy()"
          data-style="expand-left"
          ui-ladda="status.waiting"
          ng-show="step === 4")
      div(ng-show="step === 7")
        button.button-danger(translate="TRY_AGAIN" ng-click="initBuy()" ng-show="formattedTrade.error")
        button.button-success(translate="CLOSE" ng-click="cancel()" ng-hide="formattedTrade.error")
      div(ng-show="step === 8")
        button.button-success(translate="SEE_BITCOIN" ui-sref="wallet.common.transactions")
